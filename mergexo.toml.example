[runtime]
base_dir = "~/.local/share/mergexo"
worker_count = 2
poll_interval_seconds = 600
enable_github_operations = false
# Enable pre-PR issue comment routing (queued retries before PR creation + post-PR redirects).
enable_issue_comment_routing = false
# Compatibility fallback only: when true, repos without explicit policy behave as all_complete.
enable_pr_actions_monitoring = false
# Enable incremental GitHub comment polling (bounded by cursors + overlap replay).
enable_incremental_comment_fetch = false
# Seconds of replay overlap applied to the persisted cursor timestamp.
comment_fetch_overlap_seconds = 5
# Safe backfill window when a cursor is invalid/future (seconds).
comment_fetch_safe_backfill_seconds = 86400
# Tail size per failed GitHub Actions job injected into CI feedback context.
pr_actions_log_tail_lines = 500
# Restart drain timeout before pending restart is marked failed.
restart_drain_timeout_seconds = 900
# Default restart mode when /mergexo restart omits mode=...
restart_default_mode = "git_checkout"
# Allowed restart modes for this deployment.
restart_supported_modes = ["git_checkout"]
# Required for git_checkout mode; defaults to current working directory if omitted.
# git_checkout_root = "/Users/oscar/code/mergexo"
# Required for pypi mode.
# service_python = "/usr/bin/python3"
# Observability dashboard refresh cadence (seconds).
observability_refresh_seconds = 2
# Default dashboard metrics window.
observability_default_window = "24h"
# Optional row cap per panel. Set to null to disable.
observability_row_limit = 200
# History retention for observability tables.
observability_history_retention_days = 90

[repo.mergexo]
owner = "johnynek"
# name omitted => "mergexo"
default_branch = "main"
trigger_label = "agent:design"
bugfix_label = "agent:bugfix"
small_job_label = "agent:small-job"
# Required path (repo-relative) to coding + testing guidelines agents should follow
coding_guidelines_path = "docs/python_style.md"
# Optional repo-relative or absolute path to an executable required before each push.
required_tests = "scripts/test.sh"
# Per-repo GitHub Actions feedback policy: never | first_fail | all_complete.
# If omitted, runtime.enable_pr_actions_monitoring fallback is used.
pr_actions_feedback_policy = "all_complete"
# Optional bugfix-only staged regression-test gate.
# Accepts either a single regex string or a list (OR semantics across patterns).
# If omitted, MergeXO does not enforce staged test-file matching before bugfix PR creation.
# test_file_regex = "^tests/.*\\.py$"
# test_file_regex = ["^tests/.*\\.py$", "^integration/.*\\.scala$"]
design_docs_dir = "docs/design"
allowed_users = ["maintainer1", "maintainer2"]
# Optional issue used for global operator commands (restart and cross-PR unblock).
# operations_issue_number = 123
# GitHub logins allowed to run /mergexo commands.
operator_logins = []
# Optional local source to seed the mirror (path to local repo or .git dir)
# local_clone_source = "/Users/oscar/code/target-repo/.git"
# Optional explicit remote URL. Defaults to git@github.com:<owner>/<name>.git
# remote_url = "git@github.com:johnynek/target-repo.git"

[repo.bosatsu]
owner = "johnynek"
name = "bosatsu"
coding_guidelines_path = "docs/python_style.md"
# Example for fail-fast pipelines: enqueue failures even while downstream jobs are pending.
# pr_actions_feedback_policy = "first_fail"
# required_tests = "scripts/required-tests.sh"
# test_file_regex = ["^test/.*\\.scala$", "^integration/.*\\.scala$"]
# allowed_users omitted => defaults to ["johnynek"]

# Legacy single-repo compatibility:
# [repo]
# owner = "johnynek"
# name = "target-repo"
# coding_guidelines_path = "docs/python_style.md"
# required_tests = "scripts/required-tests.sh"
# [auth]
# allowed_users = ["maintainer1", "maintainer2"]

[codex]
enabled = true
# model = "gpt-5-codex"
# sandbox = "workspace-write"
# profile = "default"
# Example: ["--full-auto"]
extra_args = []

# Optional per-repo codex overrides. Any omitted key inherits from [codex].
# [codex.repo.mergexo]
# sandbox = "danger-full-access"
# extra_args = ["--full-auto"]
